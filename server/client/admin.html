<!DOCTYPE html>
<html>
  <head>
      <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>
      <style>
        body {
          margin: 10;
          padding: 0;
        }
        #wrapper {
            position: relative;
            padding: 0 0 56.25% 0;
            height: 0;
        }
        #wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        #unmute-overlay {
          position: absolute;
          top: 0;
          left: 0;
        }
        #unmute-overlay a {
          padding: 10px;
          display: block;
        }
      </style>
  </head>
  <body>
    <script src="video.js"></script>
    <script>
        //select channel with querystring ...admin.html?channel=
        window['selectedChannel'] = getUrlVars()["channel"] || "TrueLifeTV"
    </script>
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
    <div>
        <b>Current Status for TruelifeTV:</b><br />
        <pre id="channelJson">
            Please wait...
        </pre>
    </div>
    <br /><br />

    <div>
        <b>Update Playlist For <ch>TrueLifeTV</ch>:</b> <br />
        <input id="newPlaylistId" type="text" placeholder="YouTube Playlist ID" /> 
        <button id="updatePlaylist">Save</button>
    </div>
    <br /><br />
    <div>
            <b>Restart Broadcast For <ch>TrueLifeTV</ch>:</b> <br />
            <button id="restartBroadcast">Restart</button>
    </div>
    
    <script>
   

      $(() => {

        getChannelData(window['selectedChannel'], (json) => {$("#channelJson").html(JSON.stringify(json, null, 2))})
        $("#updatePlaylist").on("click", () => {
            setNewPlaylistForChannel($("#newPlaylistId").val(), window['selectedChannel'], 
            (json) => {
                $("#channelJson").html(JSON.stringify(json, null, 2))
            });
        })


        $("#restartBroadcast").on("click", () => {
            restartPlaylist(window["selectedChannel"], (json) => {
                $("#channelJson").html(JSON.stringify(json, null, 2))
            })
        })
    })
    </script>

</html>
